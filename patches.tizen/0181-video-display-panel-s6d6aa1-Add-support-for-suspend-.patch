From ad6f54924f99c2ac75f295cc3114ae4e9091d508 Mon Sep 17 00:00:00 2001
From: Tomasz Figa <t.figa@samsung.com>
Date: Tue, 26 Mar 2013 14:54:56 +0100
Subject: [PATCH 0181/1302] video: display: panel-s6d6aa1: Add support for
 suspend/resume

This patch adds suspend and resume callbacks to the driver to turn off
the display on suspend and turn it back on on resume if it was enabled
before.

Signed-off-by: Tomasz Figa <t.figa@samsung.com>
Signed-off-by: MyungJoo Ham <myungjoo.ham@samsung.com>
---
 drivers/video/display/panel-s6d6aa1.c | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

diff --git a/drivers/video/display/panel-s6d6aa1.c b/drivers/video/display/panel-s6d6aa1.c
index d62def9..6f6080c 100644
--- a/drivers/video/display/panel-s6d6aa1.c
+++ b/drivers/video/display/panel-s6d6aa1.c
@@ -751,6 +751,30 @@ static int s6d6aa1_remove(struct platform_device *dev)
 	return 0;
 }
 
+static int s6d6aa1_suspend(struct device *dev)
+{
+	struct s6d6aa1 *lcd = dev_get_drvdata(dev);
+
+	if (lcd->power != FB_BLANK_UNBLANK)
+		return 0;
+
+	return display_entity_set_state(&lcd->entity, DISPLAY_ENTITY_STATE_OFF);
+}
+
+static int s6d6aa1_resume(struct device *dev)
+{
+	struct s6d6aa1 *lcd = dev_get_drvdata(dev);
+
+	if (lcd->power != FB_BLANK_UNBLANK)
+		return 0;
+
+	return display_entity_set_state(&lcd->entity, DISPLAY_ENTITY_STATE_ON);
+}
+
+static struct dev_pm_ops s6d6aa1_pm_ops = {
+	SET_SYSTEM_SLEEP_PM_OPS(s6d6aa1_suspend, s6d6aa1_resume)
+};
+
 static struct platform_driver s6d6aa1_driver = {
 	.probe = s6d6aa1_probe,
 	.remove = s6d6aa1_remove,
@@ -758,6 +782,7 @@ static struct platform_driver s6d6aa1_driver = {
 		.name = "panel_s6d6aa1",
 		.owner = THIS_MODULE,
 		.of_match_table = of_match_ptr(s6d6aa1_of_match),
+		.pm = &s6d6aa1_pm_ops,
 	},
 };
 module_platform_driver(s6d6aa1_driver);
-- 
1.8.3.2

